---
title: "PSTAT 10 Midterm"
output: 
  pdf_document:
    extra_dependencies: ["enumerate", "array"]
editor_options: 
  markdown: 
    wrap: 72
---

```{r message=FALSE, echo=FALSE}
library(tidyverse)
```

For multiple choice questions, please circle the correct response
unambiguously. For questions that ask you to write, please write
legibly.

There are a total of 100 points to be had for the entire exam. Not all
questions are worth the same number of points. Please review the point
breakdown of entire exam before proceeding. It is given below. I highlighted
the questions that are worth more than 4 points.

### Point Breakdown

## Part 1: R Programming and Data Manipulation

-   **Question 1:** 4 points
-   **Question 2:** 4 points
-   **Question 3:** 4 points
-   **Question 4:** 4 points

## Part 2: Data Analysis Using the Iris Dataset

-   **Question 5:** 4 points
-   **Question 6:** 4 points
-   **Question 7:** **20 points**
-   **Question 8:** 4 points
-   **Question 9:** 4 points
-   **Question 10:** **10 points**
-   **Question 11:** 4 points
-   **Question 12:** **6 points**
-   **Question 13:** 4 points

## Part 3: Probability and Simulation

-   **Question 14:** **12 points**
-   **Question 15:** 4 points
-   **Question 16:** 4 points
-   **Question 17:** 4 points

**Total: 100 points**

\newpage

## Part 1: R Programming and Data Manipulation

### Question 1 (4 points)

How would I access the values in the $1^{st}$ and $3^{rd}$ rows, along
the $3^{rd}$ columnn of the below matrix? Assume the matrix is stored in
a variable called `m`.

```{r echo=F}
m <- matrix(c(10,48,22,64,40,83,82,99,67,28,55,72,88,19,93,63),nrow=4,byrow=T)
m
```

```{=tex}
\begin{enumerate}[A.]
\item \texttt{m[c(1,3),3]}
\item \texttt{m[1,3]}
\item \texttt{m[c(1,3,3)]}
\item \texttt{m[1,3,3]}
\item \texttt{m[3, c(1,3)]}
\end{enumerate}
```
TRUE: A

### Question 2 (4 points)

What would the output of the below code be(what would be printed out in
the right order)?

```{r eval=F}
i <- 1
while(i <= 6) {
  if(i %% 3 == 0)  {
    print('a')
  } else if(i %% 2 == 0) {
    print('b')
  } else {
    print('c')
  }
  i <- i + 1
}
```

```{=tex}
\begin{tabular}{p{0.45\linewidth} p{0.45\linewidth}}
    \textbf{A.} & \textbf{B.} \\
    \begin{verbatim}
    [1] c
    [1] b
    [1] a
    [1] b
    [1] c
    [1] a
    \end{verbatim} & \begin{verbatim}
    [1] c
    [1] b
    [1] a
    [1] b
    [1] c
    [1] a
    [1] b
    \end{verbatim} \\ \\
    \textbf{C.} & \textbf{D.} \\
    \begin{verbatim}
    [1] a
    [1] b
    [1] c
    [1] a
    [1] b
    [1] c
    \end{verbatim} & \begin{verbatim}
    [1] c
    [1] b
    [1] a
    [1] b
    [1] c
    [1] a
    \end{verbatim} \\ \\
    \textbf{E.} &  \\
    \begin{verbatim}
    [1] c
    [1] b
    [1] a
    [1] b
    [1] c
    [1] b
    \end{verbatim} &  \\
\end{tabular}
```
TRUE: D

### Question 3 (4 points)

Suppose the following tibble is created and saved in a variable called
`scores`

```{r echo=F}
t <- tibble(name=c("John","James","Michael","Howard"),grade1=c(74,85,92,81),grade2=c(72,92,84,99))
t
```

Which line of code would correctly filter for rows where `grade1` is
higher than `grade2`?

```{=tex}
\begin{enumerate}[A.]
\item \texttt{scores[grade1 > grade2,]}
\item \texttt{scores[scores\$grade2 > scores\$grade2]}
\item \texttt{scores[scores\$grade2 > score\$grade1,]}
\item \texttt{scores[scores\$grade1 > scores\$grade2,]}
\item \texttt{scores[grade2 > grade1]}
\end{enumerate}
```
TRUE: D

### Question 4 (4 points)

What is the result of submitting the following R code?

```{r eval=FALSE}
    x <- 1
    repeat {
      print(x)
      x = x + 1
      if (x == 4) {
        break
      }
    }
```

```{=tex}
\begin{enumerate}[A.]
\item Error
\item
\begin{verbatim}
[1] 1
[1] 2
\end{verbatim}
\item \texttt{[1] 4}
\item
\begin{verbatim}
[1] 1
[1] 2
[1] 3
\end{verbatim}
\item
\begin{verbatim}
[1] 1
[1] 2
[1] 3
[1] 4
\end{verbatim}
\end{enumerate}
```
**Solution**: D)

```{=tex}
\begin{verbatim}
[1] 1
[1] 2
[1] 3
\end{verbatim}
```

\newpage

## Part 2: Data Analysis Using the Iris Dataset

Consider the following `Iris` dataset. I have converted it into a
`tibble` here but I will use both the original dataframe and this tibble
going forward.

```{r warning=FALSE, message=FALSE}
library(tidyverse)
iris_tib <- as_tibble(iris)
print(iris_tib, n=5)
```

### Question 5 (4 points)

Which of the following is ***FALSE*** about `iris_tib`?

```{=tex}
\begin{enumerate}[A.]
\item Calling \texttt{class(iris\_tib)} would show that it is both a tibble and a dataframe.
\item Its dimensions are 150 rows and 5 columns.
\item Calling \texttt{is.matrix(iris\_tib)} would return TRUE.
\item Each row represents an observation.
\item It has four numeric variables.
\end{enumerate}
```
TRUE: C

### Question 6 (4 points)

You want to understand how `Sepal.Length` is distributed. What code
could you use for an appropriate visualization?

```{=tex}
\begin{enumerate}[A.]
\item \texttt{boxplot(iris\$Sepal.Length, main = "Boxplot of Sepal Length")}
\item \texttt{barplot(iris\$Sepal.Length, main = "Barplot of Sepal Length")}
\item \texttt{plot(iris\$Sepal.Length, main = "Plot of Sepal Length")}
\item \texttt{histogram(iris\$Sepal.Length, main = "Histogram of Sepal Length")}
\item A and B
\end{enumerate}
```
TRUE: A

\newpage

### Question 7 (Total for this question: 20 points, 4 points per blank.)

You suspect that `Sepal.Length` and `Petal.Length` are somehow related
and decide to create a scatterplot. Fill in the blanks below to produce
this scatterplot. You may use either version of the `iris` dataset:
`iris` or `iris_tib`.

```{r, echo = FALSE, out.width="70%", fig.align='center'}
plot(iris$Sepal.Length, iris$Petal.Length, 
     main = "Scatterplot of Sepal Length vs. Petal Length",
     xlab = "Sepal Length (in cm)",
     ylab = "Petal Length (in cm)")
model <- lm(iris$Petal.Length ~ iris$Sepal.Length)
abline(model, col = "red")
```

Note that the size of the blank does not necessarily correspond to the
length of the correct content.

```{r, eval=FALSE}
____1____(____2_____, _____3____, 
     main = "Scatterplot of Sepal Length vs. Petal Length",
     xlab = "Sepal Length (in cm)",
     ylab = "Petal Length (in cm)")
model <- ___4___(____5_____ ~ _____6____)
_____7____(model, col = "red")
```

1: \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

2: \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

3: \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

4: \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

5: \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

### Question 8 (4 points)

You find that the correlation between Sepal Length and Petal Length is
0.872. Considering this value and the scatterplot, how would you
describe the relationship between these two variables?

```{=tex}
\begin{enumerate}[A.]
\item There is a weak positive linear relationship between Sepal Length and Petal Length.
\item There is a strong positive linear relationship between Sepal Length and Petal Length.
\item There is a strong negative linear relationship between Sepal Length and Petal Length.
\item There is no relationship between Sepal Length and Petal Length.
\item There is a moderate negative linear relationship between Sepal Length and Petal Length.
\end{enumerate}
```
Answer: B.

### Question 9 (4 points)

What base R code could you run to obtain the correlation coefficient of
`Sepal Length` and `Petal Length`?

```{=tex}
\begin{enumerate}[A.]
\item \texttt{correlation(iris\$Sepal.Length, iris\$Petal.Length)}
\item \texttt{relationship(iris\$Sepal.Length, iris\$Petal.Length)}
\item \texttt{cor(iris\$Sepal.Length, iris\$Petal.Length)}
\item \texttt{linear\_model(iris\$Sepal.Length $\sim$ iris\$Petal.Length) \%>\% summary()}
\item \texttt{cor\_coef(iris\$Sepal.Length, iris\$Petal.Length)}
\end{enumerate}
```
TRUE: C

### Question 10 (10 points)

You decide to measure the total combined area of the Sepal and the Petal
for each flower.

First, write a function called `total_area` that takes 4 arguments:
`Sepal.Length`, `Sepal.Width`, `Petal.Length`, and `Petal.Width`. It
should compute the area of the Sepal and the area of the Petal and
return the sum of the two. Assume that the Sepal and Petal are
rectangular.

```{r echo=FALSE}
total_area <- function(Sepal.Length, Sepal.Width, Petal.Length, Petal.Width){
  Sepal.Area <- Sepal.Length * Sepal.Width
  Petal.Area <- Petal.Length*Petal.Width
  total_area <- Sepal.Area + Petal.Area
  return(total_area)
  }
```

```{r eval=F}
# write your code below









# end
```

A simple test for this function is

```         
total_area(1, 2, 2, 2)

[1] 6
```

### Question 11 (4 points)

Now you want to create a new column in your tibble which contains the
total area using the function you wrote above. Use tidyverse functions
and the pipe to create this new column. Which tidyverse verb goes into
the blank?

```{r echo=FALSE}
iris <- iris %>% 
mutate(total_area = total_area(Sepal.Length, 
                               Sepal.Width, 
                               Petal.Length, 
                               Petal.Width))
```

```{r eval=FALSE}
iris <- iris %>% 
  ____1____(total_area = total_area(Sepal.Length, 
                                    Sepal.Width, 
                                    Petal.Length, 
                                    Petal.Width))
```

```{=tex}
\begin{enumerate}[A.]
\item filter
\item select
\item arrange
\item mutate
\item summarize
\end{enumerate}
```
TRUE: D

### Question 12 (6 points)

You suspect that the relationship between `Sepal.Length` and
`Sepal.Width` is different for each Iris species. Write code below to
create a subset dataframe, based on the `Species` column which should
equal to `setosa`. Save this subset dataframe as a new object setosa_df.
**Use base R (not the tidyverse) to subset.**

```{r eval=FALSE}
# write base R code below to subset the iris dataframe
# 
setosa_df <-
```

### Question 13 (4 points)

You could have done the same operation using `tidyverse` functions. What
`dplyr` function is suitable to subset a data frame, retaining all rows
that satisfy your conditions?

```{=tex}
\begin{enumerate}[A.]
\item filter
\item select
\item mutate
\item summary
\item summarize
\end{enumerate}
```
\newpage

## Part 3: Probability and Simulation

### Question 14 (12 points)

### Estimating the Probability of Successfully Picking a Lock

**Background**: In the tabletop role-playing game Dungeons & Dragons
(D&D), players often find themselves in situations where they need to
perform tasks that require a bit of luck and skill. One common task is
picking a lock. To determine whether a character successfully picks a
lock, players roll dice and add bonuses based on their character's
abilities.

**Objective**: Imagine you are a character trying to pick a lock. You
have a high level of skill in this task, represented by a +5 bonus.

**Task**: ***Use simulations to estimate the probability of successfully
picking a lock that requires a total score of 15 or higher.*** This
involves rolling a 20-sided die (also known as "d20") and adding a +5
bonus.

#### Steps to Simulate:

-   Roll a 20-sided die (d20) to represent your initial attempt.
-   Add a bonus of 5 to the result of the d20 roll to account for your
    skill.
-   Repeat the above steps 10,000 times.
-   Calculate the proportion of times the total score is 15 or higher
    (successfully picking the lock).

```{r eval=FALSE}
# write your code below















# end
```

\newpage

### Question 15 (4 points)

What would happen if you increased the numer of replications from 10,000
to 1,000,000?

```{=tex}
\begin{enumerate}[A.]
\item The estimated probability would become exactly 1.
\item The estimated probability would become exactly 0.
\item The estimated probability would become more accurate.
\item The estimated probability would remain the same, but the computation would be faster.
\item The estimated probability would vary more significantly with each run.
\end{enumerate}
```
TRUE: C

### Question 16 (4 points)

The result of rolling a die or a combination of dice are random
variables. Which of the following best describes a random variable in
the context of probability theory?

```{=tex}
\begin{enumerate}[A.]
\item A fixed numerical outcome of an experiment.
\item A variable that can take on any value within a given range.
\item A numerical outcome of a random experiment that can vary from trial to trial.
\item The average outcome of an experiment over many trials.
\item A deterministic function of an experiment's parameters.
\end{enumerate}
```
TRUE: C

### Question 17 (4 Points)

We want to find the missing values A and B for the below PMF for a
discrete random variable X, which represent P(X=10) and P(X=20)
respectively. We are also given information that P(X=10) = 2 \* P(X=20).
Find the values for A and B.

```{r echo=F}
x <-tibble(x='P(X=x)',"0"=0.14,"5"=0.05,"10"='A',"15"=0.21,"20"='B')
x  |> 
  knitr::kable()
```

```{=tex}
\begin{enumerate}[A.]
\item \texttt{A=0.20,B=0.40}
\item \texttt{A=0.40,B=0.20}
\item \texttt{A=0.50,B=0.50}
\item \texttt{A=0.40,B=0.40}
\item \texttt{A=0.20,B=0.20}
\end{enumerate}
```
TRUE: B
